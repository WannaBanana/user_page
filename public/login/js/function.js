$(document).ready(function(){var e;$(".modal").modal(),$("#register_imageUpload").change(function(){!function(a){if(a.files&&a.files[0]){var s=new FileReader;s.onload=function(a){$("#imagePreview").css("background-image","url("+a.target.result+")"),e=a.target.result,$("#imagePreview").hide(),$("#imagePreview").fadeIn(650)},s.readAsDataURL(a.files[0])}}(this)}),$("#submitregister").click(function(a){a.preventDefault(),$.ajax({type:"POST",url:"https://xn--pss23c41retm.tw/api/register",data:{photo:e,first_name:$("#register_firstname").val(),last_name:$("#register_lastname").val(),email:$("#register_email").val(),password:$("#register_password").val(),student_id:$("#register_stuid").val(),cellphone:$("#register_cellphone").val()},cache:!1,dataType:"json",success:function(e){console.log(e)},error:function(e){alert(e.responseJSON.message)}})}),$("#signin_btn").click(function(e){e.preventDefault(),""!=$("#signin_account").val()&&""!=$("#signin_password").val()?$.ajax({type:"POST",url:`https://xn--pss23c41retm.tw/api/user/${$("#signin_account").val()}`,data:{password:$("#signin_password").val()},success:function(e){console.log(e),e&&(setCookie("key",$("#signin_account").val(),6),setCookie("value",sha256($("#signin_account").val()+s),6),setCookie("admin",e.admin,6),setCookie("space",e.space?JSON.stringify(e.space):"",6),window.location.href="./index.html",console.log("驗證完成"))},error:function(e){console.log(e),alert("帳號或密碼錯誤")}}):alert("帳號密碼不得為空")})});